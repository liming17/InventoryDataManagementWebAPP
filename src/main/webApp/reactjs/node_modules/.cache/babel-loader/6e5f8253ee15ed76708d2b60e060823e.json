{"ast":null,"code":"import { FETCH_PRODUCT_REQUEST, FETCH_PRODUCT_SUCCESS, AFTER_FETCH_PRODUCT, FETCH_PRODUCT_FAILURE, ADD_PRODUCT_AMOUNT, SUB_PRODUCT_AMOUNT, CHANGE_PRODUCT_AMOUNT, POST_ORDER_INFO_SUCCESS } from './OrderType';\nconst initialState = {\n  products: [],\n  addedProducts: [],\n  size: 5,\n  page: 1,\n  totalPage: 0,\n  order: {},\n  error: ''\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FETCH_PRODUCT_REQUEST:\n      return { ...state\n      };\n\n    case FETCH_PRODUCT_SUCCESS:\n      let setDefaultAmount = JSON.parse(JSON.stringify(action.payload.content));\n      setDefaultAmount.map(product => ({ ...product,\n        amount: 0\n      }));\n      return { ...state,\n        products: setDefaultAmount,\n        page: action.page,\n        totalPage: action.payload.totalPages\n      };\n\n    case AFTER_FETCH_PRODUCT:\n      return { ...state,\n        products: state.products.map(item => ({ ...item,\n          amount: 0\n        }))\n      };\n\n    case FETCH_PRODUCT_FAILURE:\n      return { ...state,\n        products: [],\n        error: action.payload\n      };\n\n    case ADD_PRODUCT_AMOUNT:\n      let addedProduct = state.products.find(product => product.id === action.id);\n      let existedAddedProduct = state.addedProducts.find(product => action.id === product.id);\n\n      if (existedAddedProduct) {\n        addedProduct.amount += 1;\n        existedAddedProduct.amount += 1;\n        return { ...state\n        };\n      } else {\n        addedProduct.amount += 1;\n        return { ...state,\n          addedProducts: [...state.addedProducts, addedProduct]\n        };\n      }\n\n    case SUB_PRODUCT_AMOUNT:\n      let subProduct = state.products.find(product => product.id === action.id);\n      let existedSubProduct = state.addedProducts.find(product => action.id === product.id);\n\n      if (subProduct.amount === 1) {\n        subProduct.amount -= 1;\n        let newProduct = state.addedProducts.filter(product => product.id !== action.id);\n        return { ...state,\n          addedProducts: newProduct\n        };\n      } else {\n        if (existedSubProduct) {\n          subProduct.amount -= 1;\n          existedSubProduct.amount -= 1;\n        }\n\n        return { ...state\n        };\n      }\n\n    case CHANGE_PRODUCT_AMOUNT:\n      let changedProduct = state.products.find(product => product.id === action.id);\n      let existedProduct = state.addedProducts.find(product => action.id === product.id);\n\n      if (action.id === 0) {\n        changedProduct.amount = action.amount;\n        let newProduct = state.addedProducts.filter(product => product.id !== action.id);\n        return { ...state,\n          addedProducts: newProduct\n        };\n      } else {\n        if (existedProduct) {\n          changedProduct.amount = action.amount;\n          existedProduct.amount = action.amount;\n          return { ...state\n          };\n        } else {\n          changedProduct.amount = action.amount;\n          return { ...state,\n            addedProducts: [...state.addedProducts, changedProduct]\n          };\n        }\n      }\n\n    case POST_ORDER_INFO_SUCCESS:\n      return { ...state,\n        order: action.order\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/apple/Downloads/Neo/src/main/webApp/reactjs/src/services/order/OrderReducer.js"],"names":["FETCH_PRODUCT_REQUEST","FETCH_PRODUCT_SUCCESS","AFTER_FETCH_PRODUCT","FETCH_PRODUCT_FAILURE","ADD_PRODUCT_AMOUNT","SUB_PRODUCT_AMOUNT","CHANGE_PRODUCT_AMOUNT","POST_ORDER_INFO_SUCCESS","initialState","products","addedProducts","size","page","totalPage","order","error","reducer","state","action","type","setDefaultAmount","JSON","parse","stringify","payload","content","map","product","amount","totalPages","item","addedProduct","find","id","existedAddedProduct","subProduct","existedSubProduct","newProduct","filter","changedProduct","existedProduct"],"mappings":"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","sourcesContent":["import  {FETCH_PRODUCT_REQUEST,FETCH_PRODUCT_SUCCESS,AFTER_FETCH_PRODUCT,FETCH_PRODUCT_FAILURE,\n    ADD_PRODUCT_AMOUNT,SUB_PRODUCT_AMOUNT,CHANGE_PRODUCT_AMOUNT,\n    POST_ORDER_INFO_SUCCESS} from './OrderType';\n\nconst initialState = {\n    products: [],\n    addedProducts:[],\n    size:5,\n    page: 1,\n    totalPage:0,\n    order:{},\n    error: ''\n};\n\nconst reducer = (state = initialState, action) => {\n    switch(action.type){\n        case FETCH_PRODUCT_REQUEST:\n            return{\n                ...state\n            };\n        case FETCH_PRODUCT_SUCCESS:\n            let setDefaultAmount = JSON.parse(JSON.stringify(action.payload.content));\n            setDefaultAmount.map((product)=>({...product,amount:0}));\n            return{\n                ...state,\n                products: setDefaultAmount,\n                page: action.page,\n                totalPage : action.payload.totalPages\n            };\n        case AFTER_FETCH_PRODUCT:\n            return {\n                ...state,\n                products: state.products.map(item => ({\n                    ...item,\n                    amount: 0\n                  }))\n                };\n\n        case FETCH_PRODUCT_FAILURE:\n            return{\n                ...state,\n                products: [],\n                error: action.payload\n            };\n        case ADD_PRODUCT_AMOUNT:\n            let addedProduct= state.products.find(product=> product.id === action.id);\n            let existedAddedProduct= state.addedProducts.find(product=> action.id === product.id);\n\n            if(existedAddedProduct){\n                addedProduct.amount += 1; \n                existedAddedProduct.amount += 1;\n                return {...state}\n            }else{\n                addedProduct.amount += 1; \n                return{\n                    ...state,\n                    addedProducts:[...state.addedProducts,addedProduct]\n                }\n            }\n        case SUB_PRODUCT_AMOUNT:\n            let subProduct= state.products.find(product=> product.id === action.id);\n            let existedSubProduct= state.addedProducts.find(product=> action.id === product.id);\n\n            if(subProduct.amount === 1){\n                subProduct.amount -= 1; \n                let newProduct = state.addedProducts.filter(product=>product.id !== action.id)\n                return {\n                    ...state,\n                    addedProducts:newProduct\n                }\n            }else{\n                if(existedSubProduct){\n                    subProduct.amount -= 1; \n                    existedSubProduct.amount -= 1;\n                }\n                return{\n                    ...state\n                }\n            }\n            case CHANGE_PRODUCT_AMOUNT:\n                let changedProduct= state.products.find(product=> product.id === action.id);\n                let existedProduct= state.addedProducts.find(product=> action.id === product.id);\n                if(action.id === 0){\n                    changedProduct.amount = action.amount;\n                    let newProduct = state.addedProducts.filter(product=>product.id !== action.id);\n                    return{\n                        ...state,\n                        addedProducts:newProduct\n                    }\n\n                }else{\n                    if(existedProduct){\n                        changedProduct.amount = action.amount;\n                        existedProduct.amount = action.amount;\n                        return{\n                            ...state\n                            }\n                    }else{\n                        changedProduct.amount = action.amount;\n                        return{\n                            ...state,\n                            addedProducts:[...state.addedProducts,changedProduct]\n                        }\n\n                    }\n                }\n            case POST_ORDER_INFO_SUCCESS:\n                return{\n                    ...state,\n                    order:action.order\n                }\n\n        default:\n            return state;\n    }\n};\n\nexport default reducer;"]},"metadata":{},"sourceType":"module"}