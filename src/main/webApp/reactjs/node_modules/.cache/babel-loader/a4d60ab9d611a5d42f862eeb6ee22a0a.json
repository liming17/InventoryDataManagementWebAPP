{"ast":null,"code":"// this js file contains functions can be used by multiple components\nconst sendReq = options => {\n  const headers = new Headers({\n    'Content-Type': 'application/json'\n  });\n\n  if (localStorage.getItem(\"ACCESS_TOKEN\")) {\n    headers.append('Authorization', 'Bearer ' + localStorage.getItem(\"ACCESS_TOKEN\"));\n  }\n\n  const defaults = {\n    headers: headers\n  };\n  options = Object.assign({}, defaults, options);\n  return fetch(options.url, options).then(response => response.json().then(json => {\n    if (!response.ok) {\n      return Promise.reject(json);\n    }\n\n    return json;\n  }));\n};\n\nexport function login(loginRequest) {\n  sendReq({\n    url: 'http://localhost:8082/api/auth/signin',\n    method: 'POST',\n    body: JSON.stringify(loginRequest)\n  }).then(response => {\n    localStorage.setItem(\"ACCESS_TOKEN\", response.accessToken);\n    alert(\"Sign in OK !\");\n  }).catch(error => {\n    if (error.status === 401) {\n      alert(\"Incorrect user name or password!\");\n    } else {\n      alert(error.message);\n    }\n  });\n}\nexport function signUp(signupRequest) {\n  sendReq({\n    url: 'http://localhost:8082/api/auth/signup',\n    method: 'POST',\n    body: JSON.stringify(signupRequest)\n  }).then(response => {\n    alert(\"Sign up OK!\");\n  }).catch(error => {\n    alert(error.message);\n  });\n}","map":{"version":3,"sources":["/Users/apple/Downloads/Neo/src/main/webApp/reactjs/src/component/CommonFunc.js"],"names":["sendReq","options","headers","Headers","localStorage","getItem","append","defaults","Object","assign","fetch","url","then","response","json","ok","Promise","reject","login","loginRequest","method","body","JSON","stringify","setItem","accessToken","alert","catch","error","status","message","signUp","signupRequest"],"mappings":"AAAA;AAEA,MAAMA,OAAO,GAAIC,OAAD,IAAY;AACzB,QAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAY;AAC3B,oBAAgB;AADW,GAAZ,CAAhB;;AAIA,MAAGC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAH,EAAwC;AACpCH,IAAAA,OAAO,CAACI,MAAR,CAAe,eAAf,EAAgC,YAAYF,YAAY,CAACC,OAAb,CAAqB,cAArB,CAA5C;AACH;;AAED,QAAME,QAAQ,GAAG;AAACL,IAAAA,OAAO,EAACA;AAAT,GAAjB;AAEAD,EAAAA,OAAO,GAAGO,MAAM,CAACC,MAAP,CAAc,EAAd,EAAiBF,QAAjB,EAA2BN,OAA3B,CAAV;AAEA,SAAOS,KAAK,CAACT,OAAO,CAACU,GAAT,EAAcV,OAAd,CAAL,CACNW,IADM,CAEHC,QAAQ,IAAEA,QAAQ,CAACC,IAAT,GACTF,IADS,CACJE,IAAI,IAAE;AACR,QAAG,CAACD,QAAQ,CAACE,EAAb,EAAgB;AACZ,aAAOC,OAAO,CAACC,MAAR,CAAeH,IAAf,CAAP;AACH;;AACD,WAAOA,IAAP;AACH,GANS,CAFP,CAAP;AAUF,CAvBD;;AAyBA,OAAO,SAASI,KAAT,CAAeC,YAAf,EAA4B;AAC/BnB,EAAAA,OAAO,CAAC;AACJW,IAAAA,GAAG,EAAE,uCADD;AAEJS,IAAAA,MAAM,EAAE,MAFJ;AAGJC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeJ,YAAf;AAHF,GAAD,CAAP,CAIGP,IAJH,CAIQC,QAAQ,IAAI;AAChBT,IAAAA,YAAY,CAACoB,OAAb,CAAqB,cAArB,EAAoCX,QAAQ,CAACY,WAA7C;AACAC,IAAAA,KAAK,CAAC,cAAD,CAAL;AACH,GAPD,EAOGC,KAPH,CAOSC,KAAK,IAAI;AACd,QAAGA,KAAK,CAACC,MAAN,KAAiB,GAApB,EAAwB;AACpBH,MAAAA,KAAK,CAAC,kCAAD,CAAL;AACH,KAFD,MAEK;AACDA,MAAAA,KAAK,CAACE,KAAK,CAACE,OAAP,CAAL;AACH;AACJ,GAbD;AAeH;AAED,OAAO,SAASC,MAAT,CAAgBC,aAAhB,EAA8B;AACjChC,EAAAA,OAAO,CAAC;AACJW,IAAAA,GAAG,EAAE,uCADD;AAEJS,IAAAA,MAAM,EAAE,MAFJ;AAGJC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeS,aAAf;AAHF,GAAD,CAAP,CAIGpB,IAJH,CAIQC,QAAQ,IAAI;AAChBa,IAAAA,KAAK,CAAC,aAAD,CAAL;AACH,GAND,EAMGC,KANH,CAMSC,KAAK,IAAI;AACdF,IAAAA,KAAK,CAACE,KAAK,CAACE,OAAP,CAAL;AACH,GARD;AASH","sourcesContent":["// this js file contains functions can be used by multiple components\n\nconst sendReq = (options) =>{\n   const headers = new Headers({\n    'Content-Type': 'application/json',\n   });\n\n   if(localStorage.getItem(\"ACCESS_TOKEN\")){\n       headers.append('Authorization', 'Bearer ' + localStorage.getItem(\"ACCESS_TOKEN\"));\n   }\n\n   const defaults = {headers:headers};\n\n   options = Object.assign({},defaults, options);\n\n   return fetch(options.url, options)\n   .then(\n       response=>response.json()\n       .then(json=>{\n           if(!response.ok){\n               return Promise.reject(json);\n           }\n           return json;\n       })\n   );\n};\n\nexport function login(loginRequest){\n    sendReq({\n        url: 'http://localhost:8082/api/auth/signin',\n        method: 'POST',\n        body: JSON.stringify(loginRequest)\n    }).then(response => {\n        localStorage.setItem(\"ACCESS_TOKEN\",response.accessToken);\n        alert(\"Sign in OK !\");\n    }).catch(error => {\n        if(error.status === 401){\n            alert(\"Incorrect user name or password!\");\n        }else{\n            alert(error.message)\n        }\n    });\n\n}\n\nexport function signUp(signupRequest){\n    sendReq({\n        url: 'http://localhost:8082/api/auth/signup',\n        method: 'POST',\n        body: JSON.stringify(signupRequest)\n    }).then(response => {\n        alert(\"Sign up OK!\");\n    }).catch(error => {\n        alert(error.message);\n    });\n}"]},"metadata":{},"sourceType":"module"}